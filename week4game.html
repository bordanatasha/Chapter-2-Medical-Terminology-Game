<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lymphatic & Immune System Challenge</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --glass-bg: rgba(248, 249, 250, 0.85); 
            --glass-border: rgba(255, 255, 255, 0.9);
            --text-color: #2c3e50;
            --accent-color: #2e8b57; /* Lymphatic Green */
            --accent-color-dark: #256d44;
            --correct-color: #27ae60;
            --incorrect-color: #c0392b;
            --danger-color: #c0392b;
            --danger-color-dark: #a03024;
            --card-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #e0f2f1, #b2dfdb);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: var(--text-color);
            position: relative;
            overflow: hidden;
        }

        .floating-symbols {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
        }

        .floating-symbols li {
            position: absolute;
            display: block;
            list-style: none;
            width: 20px;
            height: 20px;
            background: rgba(46, 139, 87, 0.15);
            animation: animate 25s linear infinite;
            bottom: -200px; /* Start further down */
            border-radius: 50%;
        }

        .floating-symbols li:nth-child(1) { left: 25%; width: 80px; height: 80px; animation-delay: 0s; }
        .floating-symbols li:nth-child(2) { left: 10%; width: 20px; height: 20px; animation-delay: 2s; animation-duration: 12s; }
        .floating-symbols li:nth-child(3) { left: 70%; width: 20px; height: 20px; animation-delay: 4s; }
        .floating-symbols li:nth-child(4) { left: 40%; width: 60px; height: 60px; animation-delay: 0s; animation-duration: 18s; }
        .floating-symbols li:nth-child(5) { left: 65%; width: 20px; height: 20px; animation-delay: 0s; }
        .floating-symbols li:nth-child(6) { left: 75%; width: 110px; height: 110px; animation-delay: 3s; }
        .floating-symbols li:nth-child(7) { left: 35%; width: 150px; height: 150px; animation-delay: 7s; }
        .floating-symbols li:nth-child(8) { left: 50%; width: 25px; height: 25px; animation-delay: 15s; animation-duration: 45s; }
        .floating-symbols li:nth-child(9) { left: 20%; width: 15px; height: 15px; animation-delay: 2s; animation-duration: 35s; }
        .floating-symbols li:nth-child(10) { left: 85%; width: 150px; height: 150px; animation-delay: 0s; animation-duration: 11s; }
        .floating-symbols li:nth-child(11) { left: 5%; width: 40px; height: 40px; animation-delay: 5s; animation-duration: 22s; }
        .floating-symbols li:nth-child(12) { left: 90%; width: 30px; height: 30px; animation-delay: 8s; }
        .floating-symbols li:nth-child(13) { left: 15%; width: 50px; height: 50px; animation-delay: 10s; }
        .floating-symbols li:nth-child(14) { left: 55%; width: 20px; height: 20px; animation-delay: 12s; animation-duration: 25s; }
        .floating-symbols li:nth-child(15) { left: 80%; width: 35px; height: 35px; animation-delay: 14s; }


        @keyframes animate {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; border-radius: 25%; }
            100% { transform: translateY(-1200px) rotate(720deg); opacity: 0; border-radius: 50%; }
        }

        .game-container { width: 100%; max-width: 900px; position: relative; z-index: 2; }

        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            box-shadow: var(--card-shadow);
            padding: 40px 50px; /* Increased padding */
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .screen { display: none; }
        .screen.active { display: block; }
        
        .header { text-align: center; margin-bottom: 40px; }
        .header h1 { font-size: 2.2em; font-weight: 700; margin-bottom: 5px; color: #333; }
        .header p { font-size: 1.1em; font-weight: 500; opacity: 1; color: #555; }
        
        .level-selection { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        .level-selection .level-card { width: 100%; }

        
        .level-card {
            background: rgba(255, 255, 255, 0.5); 
            backdrop-filter: blur(10px); 
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border); 
            border-radius: 15px; 
            padding: 25px;
            text-align: center; 
            cursor: pointer; 
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: var(--card-shadow);
        }
        .level-card:hover { transform: translateY(-8px); box-shadow: 0 12px 35px rgba(31, 38, 135, 0.15); }
        .level-card h3 { font-size: 1.5em; font-weight: 600; margin-bottom: 10px; color: var(--accent-color-dark); }
        .level-card p { font-size: 0.95em; line-height: 1.5; opacity: 0.7; }
        
        .shuffle-toggle {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 30px;
            gap: 10px;
            font-weight: 500;
        }
        .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: .4s; }
        input:checked + .slider { background-color: var(--accent-color); }
        input:focus + .slider { box-shadow: 0 0 1px var(--accent-color); }
        input:checked + .slider:before { transform: translateX(22px); }
        .slider.round { border-radius: 28px; }
        .slider.round:before { border-radius: 50%; }

        .stats-bar { color: var(--text-color); display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding: 10px 20px; flex-wrap: wrap; gap: 15px; }
        .stat-item { display: flex; align-items: center; gap: 8px; font-size: 1em; font-weight: 500; }
        .stat-item svg { width: 22px; height: 22px; stroke: var(--accent-color); stroke-width: 2; }
        .stat-value { font-weight: 600; }

        .progress-container { margin-bottom: 25px; }
        .progress-bar { width: 100%; height: 8px; background-color: rgba(0, 0, 0, 0.1); border-radius: 4px; overflow: hidden; }
        .progress-fill { width: 0%; height: 100%; background-color: var(--accent-color); border-radius: 4px; transition: width 0.4s ease-in-out; }
        
        .game-area-wrapper { position: relative; }
        .game-area { min-height: 350px; padding: 10px; }

        .question-text { font-size: 1.6em; font-weight: 600; line-height: 1.4; margin-bottom: 30px; text-align: center; }
        
        .options-grid { display: grid; grid-template-columns: 1fr; gap: 15px; }
        .option, .btn-tf {
            background: rgba(255, 255, 255, 0.3); border: 1px solid var(--glass-border); border-radius: 12px;
            padding: 18px 20px; cursor: pointer; transition: all 0.2s ease; font-size: 1em;
        }
        .option:hover, .btn-tf:hover { background: rgba(255, 255, 255, 0.7); border-color: var(--accent-color); }
        
        .option.selected { 
            background-color: var(--accent-color); 
            color: white; 
            border-color: var(--accent-color-dark);
        }

        .btn-tf.selected {
            background-color: var(--accent-color-dark);
            color: white; 
            border-color: var(--accent-color-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .option.correct, .btn-tf.correct { background-color: var(--correct-color); color: white; border-color: var(--correct-color); animation: pulse 0.5s; }
        .option.incorrect, .btn-tf.incorrect { background-color: var(--incorrect-color); color: white; border-color: var(--incorrect-color); animation: shake 0.5s; }

        .fill-in-the-blank-container, .word-dissection-container { text-align: center; }
        .fill-in-the-blank-wrapper { display: inline-flex; align-items: center; }
        .dissection-grid { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; }
        .dissection-group { display: flex; flex-direction: column; position: relative;}
        .dissection-group label { margin-bottom: 5px; font-size: 0.9em; opacity: 0.8; }
        .styled-input {
            padding: 12px; border-radius: 8px; border: 1px solid var(--glass-border);
            background: rgba(255, 255, 255, 0.5); font-size: 1em; font-family: 'Poppins', sans-serif;
            width: 150px; text-align: center; transition: background-color 0.3s ease;
        }
        .styled-input:focus { outline: 2px solid var(--accent-color); }
        
        .correct-answer-feedback { color: var(--correct-color); font-weight: 600; margin-left: 10px; font-size: 0.9em; }
        
        .true-false-container { display: flex; justify-content: center; gap: 20px; }
        
        .matching-container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .match-column { display: flex; flex-direction: column; gap: 10px; padding: 10px; border-radius: 10px; min-height: 200px; transition: background-color 0.2s; }
        .match-column.bank { background-color: rgba(0,0,0,0.05); }
        .match-item, .drop-zone {
            padding: 15px; border-radius: 10px; border: 1px solid var(--glass-border); min-height: 50px;
            display: flex; align-items: center; justify-content: center; text-align: center;
        }
        .match-item { background: rgba(255, 255, 255, 0.6); cursor: grab; }
        .match-item.dragging { opacity: 0.5; }
        .drop-zone { border-style: dashed; border-color: rgba(0,0,0,0.2); transition: background-color 0.2s; }
        .drop-zone.drag-over, .match-column.bank.drag-over { background-color: rgba(46, 139, 87, 0.2); }
        
        .controls { display: flex; justify-content: space-between; align-items: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(0,0,0,0.1); }
        .controls-left, .controls-right { display: flex; align-items: center; gap: 10px; }
        
        .btn { padding: 12px 25px; border: none; border-radius: 10px; font-size: 1em; font-weight: 500; cursor: pointer; transition: all 0.3s ease; }
        .btn-primary { background-color: var(--accent-color); color: white; }
        .btn-primary:hover:not(:disabled) { background-color: var(--accent-color-dark); transform: translateY(-2px); box-shadow: 0 4px 15px rgba(46, 139, 87, 0.3); }
        .btn-primary:disabled { background-color: #95a5a6; cursor: not-allowed; }
        .btn-secondary { background: transparent; border: 1px solid var(--text-color); color: var(--text-color); }
        .btn-secondary:hover { background: var(--text-color); color: white; }
        .btn-danger { background-color: var(--danger-color); color: white; }
        .btn-danger:hover { background-color: var(--danger-color-dark); }
        .btn-icon { background: none; border: none; cursor: pointer; padding: 5px; display: flex; align-items: center; }
        .btn-icon svg { width: 28px; height: 28px; stroke: var(--text-color); stroke-width: 1.5; transition: stroke 0.3s; }
        .btn-icon:hover svg { stroke: var(--accent-color); }

        .results-header { text-align: center; margin-bottom: 30px; }
        .results-header h2 { font-size: 2.5em; }
        .results-header p { font-size: 1.2em; opacity: 0.8; }
        .performance-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; text-align: center; margin-bottom: 30px; }
        .perf-card { background: rgba(255, 255, 255, 0.3); padding: 20px; border-radius: 15px; }
        .perf-card .value { font-size: 2.5em; font-weight: 700; color: var(--accent-color-dark); }
        .perf-card .label { font-size: 0.9em; font-weight: 500; opacity: 0.7; }
        
        .improvement-section { margin-top: 25px; text-align: center; }
        .improvement-section h3 { margin-bottom: 10px; }
        .topic-tags { display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; }
        .topic-tag { background-color: #e0e0e0; color: #333; padding: 5px 15px; border-radius: 15px; font-size: 0.9em; }

        #reviewContainer {
            margin-top: 20px;
            border-top: 1px solid rgba(0,0,0,0.1);
            padding-top: 20px;
            display: none;
            max-height: 300px;
            overflow-y: auto;
        }
        .review-item {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .review-item-status { font-size: 1.5em; }
        .review-item-text { flex-grow: 1; }
        .review-item-text p { font-weight: 500; margin-bottom: 5px; }
        .review-item-text span { font-weight: 400; color: var(--accent-color-dark); }
        
        .pause-overlay {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
            z-index: 10; display: none; flex-direction: column;
            justify-content: center; align-items: center; border-radius: 20px;
        }
        .pause-overlay h2 { font-size: 3em; margin-bottom: 20px; }
        .pause-overlay.active { display: flex; }

        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.03); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        
        @media (max-width: 768px) {
            .glass-panel { padding: 20px; }
            .header h1 { font-size: 1.8em; }
            .performance-grid { grid-template-columns: 1fr; }
            .matching-container { grid-template-columns: 1fr; }
            .controls { flex-direction: column; gap: 15px; }
            .dissection-grid { flex-direction: column; align-items: center;}
        }
    </style>
</head>
<body>
    <div class="floating-symbols">
        <ul>
            <li></li><li></li><li></li><li></li><li></li>
            <li></li><li></li><li></li><li></li><li></li>
            <li></li><li></li><li></li><li></li><li></li>
        </ul>
    </div>
    <div class="game-container">
        <div id="menuScreen" class="screen active">
            <div class="glass-panel">
                <div class="header"><h1>Lymphatic & Immune System</h1><p>Select an activity to begin your learning session.</p></div>
                <div class="level-selection">
                    <div class="level-card" onclick="startQuiz('Multiple Choice')"><h3>Multiple Choice</h3><p>Answer questions by selecting the best option.</p></div>
                    <div class="level-card" onclick="startQuiz('Matching')"><h3>Matching</h3><p>Match the terms to their correct definitions.</p></div>
                    <div class="level-card" onclick="startQuiz('Prefixes/Suffixes')"><h3>Prefixes/Suffixes</h3><p>Break down medical terms into their core parts.</p></div>
                    <div class="level-card" onclick="startQuiz('Fill in the Blank')"><h3>Fill in the Blank</h3><p>Complete the sentences with the correct medical term.</p></div>
                    <div class="level-card" onclick="startQuiz('Complete the Story')"><h3>Complete the Story</h3><p>Fill in the blanks to complete clinical scenarios.</p></div>
                    <div class="level-card" onclick="startQuiz('Case Studies')"><h3>Case Studies</h3><p>Apply your knowledge to solve clinical scenarios.</p></div>
                </div>
                <div class="shuffle-toggle">
                    <label for="shuffleSwitch">Shuffle Questions:</label>
                    <label class="switch">
                        <input type="checkbox" id="shuffleSwitch" checked>
                        <span class="slider round"></span>
                    </label>
                </div>
            </div>
        </div>

        <div id="gameScreen" class="screen">
            <div class="stats-bar">
                <div class="stat-item" title="Score"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 18.75h-9a9 9 0 119 0zM12 15.75a3 3 0 11-6 0 3 3 0 016 0z" /></svg><span id="score" class="stat-value">0</span></div>
                <div class="stat-item" title="Time"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg><span id="timer" class="stat-value">00:00</span></div>
                <div class="stat-item" title="Progress"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" /></svg><span id="progressText" class="stat-value">0/0</span></div>
            </div>
            <div class="progress-container"><div class="progress-bar"><div id="progressFill" class="progress-fill"></div></div></div>
            <div class="glass-panel">
                <div class="game-area-wrapper">
                    <div id="pauseOverlay" class="pause-overlay"><h2>Paused</h2><button class="btn btn-primary" onclick="resumeGame()">Resume</button></div>
                    <div id="gameArea"></div>
                </div>
                <div class="controls">
                    <div class="controls-left">
                        <button class="btn btn-secondary" onclick="showMenu()">Main Menu</button>
                        <button class="btn btn-danger" onclick="endGame(true)">End Now</button>
                    </div>
                    <div class="controls-right">
                        <button class="btn btn-icon" id="pauseBtn" title="Pause" onclick="pauseGame()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25v13.5m-6-13.5v13.5" /></svg></button>
                        <button class="btn btn-icon" id="readAloudBtn" title="Read Aloud"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" /></svg></button>
                        <button class="btn btn-primary" id="submitBtn" onclick="checkAnswer()">Submit</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="resultsScreen" class="screen">
            <div class="glass-panel">
                 <div class="results-header">
                    <h2 id="resultsTitle">Quiz Complete!</h2><p id="resultsMessage">Here's how you did.</p>
                </div>
                <div class="performance-grid">
                    <div class="perf-card"><div id="finalScore" class="value">0%</div><div class="label">Accuracy</div></div>
                    <div class="perf-card"><div id="finalQuestions" class="value">0/0</div><div class="label">Correct</div></div>
                     <div class="perf-card"><div id="finalTime" class="value">00:00</div><div class="label">Total Time</div></div>
                </div>
                <div class="improvement-section" id="improvementSection" style="display: none;">
                    <h3>Areas for Improvement</h3><div id="topicTags" class="topic-tags"></div>
                </div>

                <div id="reviewContainer"></div>

                <div class="controls" style="justify-content: center; gap: 15px;">
                    <button class="btn btn-secondary" onclick="showMenu()">Return to Menu</button>
                    <button class="btn btn-primary" id="reviewBtn" onclick="toggleReview()">Review Answers</button>
                </div>
            </div>
        </div>
    </div>

<script>
    const screens = document.querySelectorAll('.screen');
    const gameArea = document.getElementById('gameArea');
    const submitBtn = document.getElementById('submitBtn');
    const readAloudBtn = document.getElementById('readAloudBtn');
    const pauseOverlay = document.getElementById('pauseOverlay');
    const scoreEl = document.getElementById('score');
    const timerEl = document.getElementById('timer');
    const progressTextEl = document.getElementById('progressText');
    const progressFillEl = document.getElementById('progressFill');
    const resultsTitle = document.getElementById('resultsTitle');
    const resultsMessage = document.getElementById('resultsMessage');
    const finalScoreEl = document.getElementById('finalScore');
    const finalQuestionsEl = document.getElementById('finalQuestions');
    const finalTimeEl = document.getElementById('finalTime');
    const improvementSection = document.getElementById('improvementSection');
    const topicTags = document.getElementById('topicTags');
    const reviewContainer = document.getElementById('reviewContainer');
    const reviewBtn = document.getElementById('reviewBtn');

    const staticQuizzes = {
        'Multiple Choice': {
            questions: [
                { type: "multiple-choice", topic: "Functions", questionText: "Which is NOT a main function of the lymphatic system?", options: ["Absorbing fats", "Removing waste products", "Producing red blood cells", "Returning lymph to veins"], answer: "Producing red blood cells" },
                { type: "multiple-choice", topic: "Immunity", questionText: "Immunity that is present at birth is known as:", options: ["Acquired immunity", "Natural immunity", "Passive immunity", "Active immunity"], answer: "Natural immunity" },
                { type: "multiple-choice", topic: "Pathology", questionText: "An abnormal accumulation of lymph fluid in the tissues is called:", options: ["Lymphadenitis", "Lymphoma", "Lymphedema", "Lymphangioma"], answer: "Lymphedema" },
                { type: "multiple-choice", topic: "Immune Cells", questionText: "Which type of lymphocyte produces antibodies?", options: ["T cells", "B cells", "Natural killer cells", "Dendritic cells"], answer: "B cells" },
                { type: "multiple-choice", topic: "Pathology", questionText: "Which of these is a group of proteins that combines with antibodies to fight pathogens?", options: ["Cytokines", "Interferons", "Complement system", "Immunoglobulins"], answer: "Complement system" },
                { type: "multiple-choice", topic: "Cancer", questionText: "What is the term for the process by which cancer spreads to a new site?", options: ["Angiogenesis", "Metastasis", "Carcinoma in situ", "Neoplasm"], answer: "Metastasis" },
                { type: "multiple-choice", topic: "Treatments", questionText: "A medication that kills or damages cells and is often used in chemotherapy is called a:", options: ["Corticosteroid", "Antihistamine", "Immunosuppressant", "Cytotoxic drug"], answer: "Cytotoxic drug" },
                { type: "multiple-choice", topic: "Cancer", questionText: "A malignant tumor that arises from connective tissues such as muscle or bone is called a:", options: ["Carcinoma", "Sarcoma", "Lymphoma", "Melanoma"], answer: "Sarcoma" }
            ]
        },
        'Matching': {
            questions: [
                { type: "matching", topic: "Lymph Nodes", questionText: "Match the lymph node group to its location.", terms: ["Cervical", "Axillary", "Inguinal"], definitions: ["Sides of the neck", "Under the arms", "Groin area"], answer: { "Cervical": "Sides of the neck", "Axillary": "Under the arms", "Inguinal": "Groin area" }},
                { type: "matching", topic: "Lymphocytes", questionText: "Match the lymphocyte type to its primary function.", terms: ["Natural killer cells", "B cells", "T cells"], definitions: ["Kill cancer cells", "Produce antibodies", "Cell-mediated immunity"], answer: { "Natural killer cells": "Kill cancer cells", "B cells": "Produce antibodies", "T cells": "Cell-mediated immunity" }},
                { type: "matching", topic: "Pathogenic Organisms", questionText: "Match the organism type to the disease it causes.", terms: ["Bacteria", "Fungus", "Parasite", "Virus"], definitions: ["Lyme disease", "Yeast infection", "Malaria", "Influenza"], answer: { "Bacteria": "Lyme disease", "Fungus": "Yeast infection", "Parasite": "Malaria", "Virus": "Influenza" }},
                { type: "matching", topic: "Pathology", questionText: "Match the term to its definition.", terms: ["Lymphadenitis", "Splenomegaly", "Lymphangioma", "Lymphedema"], definitions: ["Inflammation of the lymph nodes", "Abnormal enlargement of the spleen", "Benign tumor of lymphatic vessels", "Swelling due to lymph fluid accumulation"], answer: { "Lymphadenitis": "Inflammation of the lymph nodes", "Splenomegaly": "Abnormal enlargement of the spleen", "Lymphangioma": "Benign tumor of lymphatic vessels", "Lymphedema": "Swelling due to lymph fluid accumulation" }},
                { type: "matching", topic: "Medical Specialties", questionText: "Match the specialist to their area of expertise.", terms: ["Allergist", "Immunologist", "Oncologist", "Lymphologist"], definitions: ["Treats allergic reactions", "Treats immune system disorders", "Treats malignant disorders and tumors", "Treats lymphatic system disorders"], answer: { "Allergist": "Treats allergic reactions", "Immunologist": "Treats immune system disorders", "Oncologist": "Treats malignant disorders and tumors", "Lymphologist": "Treats lymphatic system disorders" }}
            ]
        },
        'Prefixes/Suffixes': {
            questions: [
                { type: "multiple-choice", topic: "Combining Forms", questionText: "Which combining form means 'lymph'?", options: ["lymphaden/o", "lymph/o", "lymphangi/o", "lymphocyt/o"], answer: "lymph/o" },
                { type: "multiple-choice", topic: "Combining Forms", questionText: "Which combining form means 'spleen'?", options: ["splen/o", "tonsill/o", "thym/o", "myel/o"], answer: "splen/o" },
                { type: "multiple-choice", topic: "Combining Forms", questionText: "The combining form 'lymphaden/o' means:", options: ["lymph vessel", "lymph cell", "lymph gland (node)", "lymph fluid"], answer: "lymph gland (node)" },
                { type: "multiple-choice", topic: "Combining Forms", questionText: "What does the combining form 'myel/o' refer to?", options: ["Muscle", "Spleen", "Bone marrow", "Thymus"], answer: "Bone marrow" },
                { type: "multiple-choice", topic: "Suffixes", questionText: "In the term 'lymphoma', what does the suffix '-oma' mean?", options: ["Inflammation", "Disease", "Tumor", "Enlargement"], answer: "Tumor" },
                { type: "word-dissection", topic: "Word Breakdown", questionText: "Break down the term 'splenomegaly'.", answer: { root: "splen/o", suffix: "-megaly" }, hint: "Root means spleen." },
                { type: "word-dissection", topic: "Word Breakdown", questionText: "Break down the term 'lymphadenitis'.", answer: { root: "lymphaden", suffix: "-itis" }, hint: "Root means lymph node." },
                { type: "word-dissection", topic: "Word Breakdown", questionText: "Break down the term 'oncologist'.", answer: { root: "onc", suffix: "-ologist" }, hint: "Root means tumor." },
                { type: "word-dissection", topic: "Word Breakdown", questionText: "Break down the term 'phagocyte'.", answer: { root: "phag/o", suffix: "-cyte" }, hint: "A cell that eats." },
                { type: "word-dissection", topic: "Word Breakdown", questionText: "Break down the term 'cytotoxic'.", answer: { root: "cyt/o", suffix: "-toxic" }, hint: "Root means cell." }
            ]
        },
        'Fill in the Blank': {
            questions: [
                { type: "fill-in-the-blank", topic: "Structures", questionText: "Specialized lymphatic vessels in the small intestine that absorb fats are called _________.", answer: "lacteals" },
                { type: "fill-in-the-blank", topic: "Pathology", questionText: "A severe, systemic allergic reaction is also known as _________.", answer: "anaphylaxis" },
                { type: "fill-in-the-blank", topic: "Immunity", questionText: "Getting a vaccine is a form of _________ immunity.", answer: "acquired" },
                { type: "fill-in-the-blank", topic: "Structures", questionText: "The gland located above the heart that plays a role in immunity is the _________.", answer: "thymus" },
                { type: "fill-in-the-blank", topic: "Pathology", questionText: "The term for any disease process affecting a lymph node or nodes is _________.", answer: "lymphadenopathy" },
                { type: "fill-in-the-blank", topic: "Treatments", questionText: "Therapy that uses substances to identify and attack specific cancer cells without harming normal cells is called _________ therapy.", answer: "targeted" },
                { type: "fill-in-the-blank", topic: "Diagnostic Procedures", questionText: "The diagnostic test to detect damage or malformations of lymphatic vessels is _________.", answer: "lymphoscintigraphy" },
                { type: "fill-in-the-blank", topic: "Pathology", questionText: "A benign tumor formed by an abnormal collection of lymphatic vessels is a _________.", answer: "lymphangioma" },
                { type: "fill-in-the-blank", topic: "Pathology", questionText: "The Epstein-Barr virus is known to cause infectious _________.", answer: "mononucleosis" },
                { type: "fill-in-the-blank", topic: "Treatments", questionText: "Therapy used after primary cancer treatments are completed to decrease the risk of recurrence is known as _________ therapy.", answer: "adjuvant" }
            ]
        },
        'Complete the Story': {
            questions: [
                { type: "complete-the-story", topic: "Clinical Scenarios", 
                  questionText: "A patient presents with swelling in their left arm after a mastectomy. This accumulation of fluid is known as _________. Because it was caused by a medical treatment, it is classified as _________ lymphedema. The doctor who specializes in these types of disorders is a _________.",
                  answers: ["lymphedema", "secondary", "lymphologist"]
                },
                { type: "complete-the-story", topic: "Clinical Scenarios", 
                  questionText: "A biopsy of a patient's lymph node reveals the presence of large, cancerous lymphocytes known as _________ cells. This finding confirms a diagnosis of _________ lymphoma. The patient is referred to an _________ for treatment.",
                  answers: ["Reed-Sternberg", "Hodgkin's", "oncologist"]
                }
            ]
        },
        'Case Studies': {
            questions: [
                { type: "case-study", topic: "Clinical Cases", questionText: "A patient is diagnosed with Hodgkin's lymphoma. The pathologist would expect to find which type of cells in the biopsy?", options: ["B cells", "T cells", "Reed-Sternberg cells", "Natural killer cells"], answer: "Reed-Sternberg cells" },
                { type: "case-study", topic: "Clinical Cases", questionText: "After surgery to remove lymph nodes, a patient develops swelling in her arm. This condition is known as:", options: ["Lymphadenitis", "Primary Lymphedema", "Secondary Lymphedema", "Lymphoma"], answer: "Secondary Lymphedema" },
                { type: "case-study", topic: "Clinical Cases", questionText: "A patient with HIV has developed a type of cancer known as Kaposi's sarcoma. This is considered what type of disease?", options: ["Autoimmune disorder", "Congenital malformation", "Opportunistic disease", "Hereditary disorder"], answer: "Opportunistic disease" },
                { type: "case-study", topic: "Clinical Cases", questionText: "A patient receives a 'lumpectomy' as a treatment for breast cancer. What does this procedure involve?", options: ["Removal of the entire breast and nipple", "Removal of only the cancerous tissue and a margin", "Removal of all axillary lymph nodes", "Reconstruction of the breast"], answer: "Removal of only the cancerous tissue and a margin" },
                { type: "case-study", topic: "Clinical Cases", questionText: "To confirm an HIV diagnosis after an initial ELISA test, which more accurate test is typically performed?", options: ["Scratch test", "Lymphoscintigraphy", "Western blot test", "Bioimpedance spectroscopy"], answer: "Western blot test" },
                { type: "case-study", topic: "Treatments", questionText: "A patient with a severe bacterial infection is given antibiotics. This type of pathogen is a:", options: ["Virus", "Bacteria", "Fungus", "Parasite"], answer: "Bacteria"},
                { type: "case-study", topic: "Pathology", questionText: "A patient complains of severe itching and a rash after eating shellfish. This acute allergic reaction is known as:", options: ["Anaphylaxis", "Urticaria", "Lymphedema", "Allergen"], answer: "Urticaria"},
                { type: "case-study", topic: "Treatments", questionText: "A patient with a malignant tumor in their muscle tissue would be diagnosed with what type of cancer?", options: ["Carcinoma", "Sarcoma", "Myosarcoma", "Myoma"], answer: "Myosarcoma"},
                { type: "case-study", topic: "Treatments", questionText: "A doctor who specializes in diagnosing and treating malignant disorders such as tumors and cancer is a(n):", options: ["Immunologist", "Allergist", "Oncologist", "Pathologist"], answer: "Oncologist"}
            ]
        }
    };

    let gameState = {};

    function showScreen(screenId) { screens.forEach(s => s.style.display = s.id === screenId ? 'block' : 'none'); }
    function shuffleArray(a) { for (let i = a.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1));[a[i], a[j]] = [a[j], a[i]]; } return a; }
    function formatTime(s) { const m = Math.floor(s / 60); const sec = s % 60; return `${m.toString().padStart(2, '0')}:${sec.toString().padStart(2, '0')}`; }

    function resetGameState() {
        if (gameState.timerInterval) clearInterval(gameState.timerInterval);
        speechSynthesis.cancel();
        gameState = {
            level: '', questions: [], currentQuestionIndex: 0, score: 0, time: 0,
            timerInterval: null, answeredQuestions: []
        };
    }

    function startQuiz(level) {
        resetGameState();
        gameState.level = level;
        const shuffleEnabled = document.getElementById('shuffleSwitch').checked;
        let questionsForLevel = JSON.parse(JSON.stringify(staticQuizzes[level].questions));
        if (shuffleEnabled) {
            gameState.questions = shuffleArray(questionsForLevel);
        } else {
            gameState.questions = questionsForLevel;
        }
        showScreen('gameScreen');
        startTimer();
        displayQuestion();
    }
    
    function startTimer() {
        if (gameState.timerInterval) clearInterval(gameState.timerInterval);
        gameState.timerInterval = setInterval(() => { gameState.time++; timerEl.textContent = formatTime(gameState.time); }, 1000);
    }
    
    function pauseGame() {
        clearInterval(gameState.timerInterval);
        pauseOverlay.classList.add('active');
    }

    function resumeGame() {
        pauseOverlay.classList.remove('active');
        startTimer();
    }

    function displayQuestion() {
        speechSynthesis.cancel();
        if (gameState.currentQuestionIndex >= gameState.questions.length) {
            endGame(); return;
        }
        const q = gameState.questions[gameState.currentQuestionIndex];
        gameArea.innerHTML = '';
        
        switch (q.type) {
            case 'multiple-choice':
            case 'case-study':
                renderMultipleChoice(q);
                break;
            case 'matching':
                renderMatching(q);
                break;
            case 'fill-in-the-blank':
                renderFillInTheBlank(q);
                break;
            case 'true-false':
                renderTrueFalse(q);
                break;
            case 'word-dissection':
                renderWordDissection(q);
                break;
            case 'complete-the-story':
                renderCompleteTheStory(q);
                break;
        }

        updateStats();
        submitBtn.disabled = true;
        readAloudBtn.onclick = () => {
            speechSynthesis.cancel(); 
            let textToSpeak = q.questionText;
            if(q.type === 'fill-in-the-blank' || q.type === 'complete-the-story') {
                textToSpeak = q.questionText.replace(/_+/g, 'blank');
            } else if (q.options) {
                textToSpeak += ". The options are: " + q.options.join(', ');
            } else if (q.type === 'true-false') {
                // No extra text needed
            } else if (q.type === 'matching') {
                textToSpeak += ". The items to match are: " + q.terms.join(', ');
            }
            const utterance = new SpeechSynthesisUtterance(textToSpeak);
            speechSynthesis.speak(utterance);
        };
    }

    function renderMultipleChoice(q) {
        gameArea.innerHTML = `<p class="question-text">${q.questionText}</p><div class="options-grid">${shuffleArray([...q.options]).map(opt => `<div class="option" data-value="${opt}">${opt}</div>`).join('')}</div>`;
        document.querySelectorAll('.option').forEach(opt => opt.addEventListener('click', () => {
            document.querySelectorAll('.option').forEach(o => o.classList.remove('selected'));
            opt.classList.add('selected');
            submitBtn.disabled = false;
        }));
    }

    function renderTrueFalse(q) {
        gameArea.innerHTML = `<p class="question-text">${q.questionText}</p>
            <div class="true-false-container">
                <button class="btn btn-primary btn-tf" data-value="true">True</button>
                <button class="btn btn-primary btn-tf" data-value="false">False</button>
            </div>`;
        document.querySelectorAll('.btn-tf').forEach(btn => btn.addEventListener('click', () => {
             document.querySelectorAll('.btn-tf').forEach(b => b.classList.remove('selected'));
             btn.classList.add('selected');
             submitBtn.disabled = false;
        }));
    }
    
    function renderFillInTheBlank(q) {
        const parts = q.questionText.split('_________');
        gameArea.innerHTML = `<div class="fill-in-the-blank-container">
            <p class="question-text">${parts[0]}<span class="fill-in-the-blank-wrapper"><input type="text" id="fillBlankInput" class="styled-input"></span>${parts.length > 1 ? parts[1] : ''}</p>
        </div>`;
        document.getElementById('fillBlankInput').addEventListener('input', () => {
             submitBtn.disabled = document.getElementById('fillBlankInput').value.trim() === '';
        });
    }

    function renderCompleteTheStory(q) {
        let storyHTML = q.questionText;
        q.answers.forEach((ans, i) => {
            storyHTML = storyHTML.replace('_________', `<input type="text" class="styled-input story-blank" data-index="${i}">`);
        });
        gameArea.innerHTML = `<div class="fill-in-the-blank-container"><p class="question-text">${storyHTML}</p></div>`;
        document.querySelectorAll('.story-blank').forEach(input => {
            input.addEventListener('input', () => {
                const allFilled = Array.from(document.querySelectorAll('.story-blank')).every(i => i.value.trim() !== '');
                submitBtn.disabled = !allFilled;
            });
        });
    }

    function renderWordDissection(q) {
        gameArea.innerHTML = `<p class="question-text">${q.questionText}</p>
            <div class="word-dissection-container">
                <div class="dissection-grid">
                    ${'prefix' in q.answer ? `<div class="dissection-group"><label>Prefix</label><input type="text" id="prefixInput" class="styled-input"></div>` : ''}
                    ${'root' in q.answer ? `<div class="dissection-group"><label>Root</label><input type="text" id="rootInput" class="styled-input"></div>` : ''}
                    ${'suffix' in q.answer ? `<div class="dissection-group"><label>Suffix</label><input type="text" id="suffixInput" class="styled-input"></div>` : ''}
                </div>
                ${q.hint ? `<p style="font-size:0.9em; opacity:0.7; margin-top:15px;">Hint: ${q.hint}</p>` : ''}
            </div>`;
        document.querySelectorAll('.styled-input').forEach(input => input.addEventListener('input', () => {
            submitBtn.disabled = false;
        }));
    }

    function renderMatching(q) {
        const termsHTML = shuffleArray([...q.terms]).map(term => `<div class="match-item" draggable="true" data-term="${term}">${term}</div>`).join('');
        const defsHTML = q.definitions.map(def => `<div class="drop-zone" data-definition="${def}">${def}</div>`).join('');
        gameArea.innerHTML = `<p class="question-text">${q.questionText}</p><div class="matching-container"><div class="match-column bank">${termsHTML}</div><div class="match-column">${defsHTML}</div></div>`;
        setupDragAndDrop();
    }

    function setupDragAndDrop() {
        const draggables = document.querySelectorAll('.match-item');
        const dropZones = document.querySelectorAll('.match-column, .drop-zone');
        let draggedItem = null;

        draggables.forEach(d => {
            d.addEventListener('dragstart', () => { draggedItem = d; setTimeout(() => d.classList.add('dragging'), 0); });
            d.addEventListener('dragend', () => { d.classList.remove('dragging'); if (Array.from(document.querySelectorAll('.bank .match-item')).length === 0) { submitBtn.disabled = false; }});
        });

        dropZones.forEach(zone => {
            zone.addEventListener('dragover', e => { e.preventDefault(); if(zone.children.length === 0 || zone.classList.contains('bank')) { zone.classList.add('drag-over'); } });
            zone.addEventListener('dragleave', () => zone.classList.remove('drag-over'));
            zone.addEventListener('drop', e => {
                e.preventDefault(); zone.classList.remove('drag-over');
                if (zone.children.length > 0 && !zone.classList.contains('bank')) { return; }
                zone.appendChild(draggedItem);
            });
        });
    }

    function updateStats() {
        scoreEl.textContent = Math.round(gameState.score);
        progressTextEl.textContent = `${gameState.currentQuestionIndex + 1}/${gameState.questions.length}`;
        progressFillEl.style.width = `${((gameState.currentQuestionIndex + 1) / gameState.questions.length) * 100}%`;
    }

    function checkAnswer() {
        const q = gameState.questions[gameState.currentQuestionIndex];
        let isCorrect = false;

        switch (q.type) {
            case 'multiple-choice':
            case 'case-study':
                const selected = document.querySelector('.option.selected');
                if (!selected) return;
                isCorrect = selected.dataset.value.toLowerCase() === q.answer.toLowerCase();
                if(isCorrect) gameState.score += 10;
                selected.classList.add(isCorrect ? 'correct' : 'incorrect');
                if (!isCorrect) document.querySelectorAll('.option').forEach(opt => { if (opt.dataset.value.toLowerCase() === q.answer.toLowerCase()) opt.classList.add('correct'); });
                break;
            case 'true-false':
                const selectedBtn = document.querySelector('.btn-tf.selected');
                 if (!selectedBtn) return;
                isCorrect = (selectedBtn.dataset.value === 'true') === q.answer;
                if(isCorrect) gameState.score += 10;
                selectedBtn.classList.add(isCorrect ? 'correct' : 'incorrect');
                if (!isCorrect) {
                    document.querySelectorAll('.btn-tf').forEach(btn => {
                        if ((btn.dataset.value === 'true') === q.answer) {
                            btn.classList.add('correct');
                        }
                    });
                }
                break;
            case 'fill-in-the-blank':
                const inputEl = document.getElementById('fillBlankInput');
                isCorrect = inputEl.value.trim().toLowerCase() === q.answer.toLowerCase();
                if(isCorrect) gameState.score += 10;
                inputEl.style.backgroundColor = isCorrect ? '#d4edda' : '#f8d7da';
                if (!isCorrect) {
                    inputEl.value = `${inputEl.value} (${q.answer})`;
                }
                break;
            case 'complete-the-story':
                let allCorrect = true;
                document.querySelectorAll('.story-blank').forEach(input => {
                    const index = parseInt(input.dataset.index, 10);
                    if (input.value.trim().toLowerCase() === q.answers[index].toLowerCase()) {
                        input.style.backgroundColor = '#d4edda';
                    } else {
                        input.style.backgroundColor = '#f8d7da';
                        allCorrect = false;
                    }
                });
                isCorrect = allCorrect;
                if(isCorrect) gameState.score += 10;
                break;
            case 'word-dissection':
                 isCorrect = true;
                 const prefixInput = document.getElementById('prefixInput');
                 const rootInput = document.getElementById('rootInput');
                 const suffixInput = document.getElementById('suffixInput');

                 if (prefixInput && 'prefix' in q.answer) {
                     if (prefixInput.value.trim().toLowerCase() !== q.answer.prefix) {
                        prefixInput.style.backgroundColor = '#f8d7da'; isCorrect = false;
                     } else { prefixInput.style.backgroundColor = '#d4edda'; }
                 }
                 if (rootInput && 'root' in q.answer) {
                     if (rootInput.value.trim().toLowerCase() !== q.answer.root) {
                        rootInput.style.backgroundColor = '#f8d7da'; isCorrect = false;
                     } else { rootInput.style.backgroundColor = '#d4edda'; }
                 }
                 if (suffixInput && 'suffix' in q.answer) {
                     if (suffixInput.value.trim().toLowerCase() !== q.answer.suffix) {
                        suffixInput.style.backgroundColor = '#f8d7da'; isCorrect = false;
                     } else { suffixInput.style.backgroundColor = '#d4edda'; }
                 }
                 if(isCorrect) gameState.score += 10;
                 break;
            case 'matching':
                let correctMatches = 0;
                const totalMatches = Object.keys(q.answer).length;
                document.querySelectorAll('.drop-zone').forEach(z => {
                    const termItem = z.querySelector('.match-item');
                    if (termItem && q.answer[termItem.dataset.term] === z.dataset.definition) {
                        correctMatches++; 
                        z.style.borderColor = 'var(--correct-color)';
                        termItem.style.borderColor = 'var(--correct-color)';
                    } else if (termItem) { 
                        z.style.borderColor = 'var(--incorrect-color)'; 
                        termItem.style.borderColor = 'var(--incorrect-color)';
                    }
                });
                isCorrect = correctMatches === totalMatches;
                if (correctMatches > 0) {
                    gameState.score += (correctMatches / totalMatches) * 10;
                }
                break;
        }
        
        gameState.answeredQuestions.push({ question: q, isCorrect: isCorrect });
        updateStats();
        document.querySelectorAll('.option, .match-item, .styled-input, .btn-tf').forEach(el => el.style.pointerEvents = 'none');
        submitBtn.disabled = true;
        setTimeout(() => { gameState.currentQuestionIndex++; displayQuestion(); }, isCorrect ? 2000 : 3000);
    }
    
    function endGame(forceEnd = false) {
        clearInterval(gameState.timerInterval);
        speechSynthesis.cancel();
        showScreen('resultsScreen');

        const questionsAttempted = gameState.answeredQuestions.length;
        const correctAnswers = gameState.answeredQuestions.filter(q => q.isCorrect).length;
        
        const accuracy = questionsAttempted > 0 ? Math.round((correctAnswers / questionsAttempted) * 100) : 0;
        finalScoreEl.textContent = `${accuracy}%`;
        finalQuestionsEl.textContent = `${correctAnswers}/${questionsAttempted}`;
        finalTimeEl.textContent = formatTime(gameState.time);

        if (questionsAttempted === 0) {
            resultsMessage.textContent = "You didn't answer any questions.";
            improvementSection.style.display = 'none';
            reviewBtn.style.display = 'none';
            return;
        }
        
        reviewBtn.style.display = 'inline-block';
        if (accuracy === 100) { resultsTitle.textContent = "Excellent!"; resultsMessage.textContent = "Your diagnostic skills are top-tier."; }
        else if (accuracy >= 70) { resultsTitle.textContent = "Well Done!"; resultsMessage.textContent = "You have a solid grasp of the material."; }
        else { resultsTitle.textContent = "Good Effort!"; resultsMessage.textContent = "Time to hit the books and review your weak areas."; }

        const incorrectTopics = new Set(gameState.answeredQuestions.filter(q => !q.isCorrect).map(q => q.question.topic));
        if (incorrectTopics.size > 0) {
            improvementSection.style.display = 'block';
            topicTags.innerHTML = [...incorrectTopics].map(topic => `<span class="topic-tag">${topic}</span>`).join('');
        } else {
            improvementSection.style.display = 'none';
        }

        populateReview();
    }
    
    function populateReview() {
        reviewContainer.innerHTML = '<h3>Answer Review</h3>';
        gameState.answeredQuestions.forEach(item => {
            const correctAnsString = (q) => {
                if (q.type === 'true-false') {
                    return q.answer ? 'True' : 'False';
                }
                if (q.type === 'complete-the-story') {
                    return q.answers.join(', ');
                }
                if (typeof q.answer === 'object') {
                    if(q.type === 'word-dissection') {
                        let parts = [];
                        if(q.answer.prefix) parts.push(`Prefix: ${q.answer.prefix}`);
                        if(q.answer.root) parts.push(`Root: ${q.answer.root}`);
                        if(q.answer.suffix) parts.push(`Suffix: ${q.answer.suffix}`);
                        return parts.join(', ');
                    }
                    return "See matched pairs";
                }
                return q.answer;
            };

            const reviewItem = document.createElement('div');
            reviewItem.className = 'review-item';
            reviewItem.innerHTML = `
                <div class="review-item-status">${item.isCorrect ? '✔️' : '❌'}</div>
                <div class="review-item-text">
                    <p>${item.question.questionText.replace(/_+/g, '...')}</p>
                    <span>Correct Answer(s): ${correctAnsString(item.question)}</span>
                </div>
            `;
            reviewContainer.appendChild(reviewItem);
        });
    }
    
    function toggleReview() {
        const isHidden = reviewContainer.style.display === 'none' || reviewContainer.style.display === '';
        reviewContainer.style.display = isHidden ? 'block' : 'none';
        reviewBtn.textContent = isHidden ? 'Hide Review' : 'Review Answers';
    }

    function showMenu() { 
        resetGameState(); 
        reviewContainer.style.display = 'none';
        reviewBtn.textContent = 'Review Answers';
        showScreen('menuScreen'); 
    }
</script>

</body>
</html>